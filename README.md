# Clash 规则测试器

一个基于 Web 的工具，可直接在浏览器中测试和调试 Clash 路由规则。

此应用程序允许您粘贴 Clash 配置，输入要测试的域名，并精确查看匹配到的规则以及最终的策略是什么。它对于验证涉及多个规则集的复杂配置特别有用。

## 功能特性

- **实时规则测试**：在实时编辑器中测试您的 Clash 规则，无需重新加载客户端。
- **功能齐全的编辑器**：由 Monaco 驱动的 YAML 编辑器，支持语法高亮。
- **全面的规则支持**：支持大多数常见的规则类型：
  - `DOMAIN-SUFFIX`
  - `DOMAIN`
  - `DOMAIN-KEYWORD`
  - `IP-CIDR`
  - `MATCH` / `FINAL`
- **规则集提供者 (Rule Provider) 支持**：
  - 获取并测试远程 `RULE-SET` 提供者 (`type: http`)。
  - 支持内联规则提供者 (`type: inline`)。
- **详细的匹配结果**：显示匹配的规则、解析出的 IP 地址（用于基于 IP 的规则）、最终策略，以及触发匹配的提供者中的具体子规则。
- **智能 DNS 解析**：当检测到 `IP-CIDR` 或基于 IP 的提供者时，自动将域名解析为 IP。
- **提供者缓存**：远程规则集在会话期间会被缓存，以加快后续测试速度。

## 工作原理

1.  **配置解析**：应用程序解析编辑器中的 YAML 配置。
2.  **提供者获取**：对于使用 `http` 提供者的 `RULE-SET` 规则，它会通过一个 CORS 代理来获取远程规则文件，以绕过浏览器限制。
3.  **DNS 解析**：如果配置包含基于 IP 的规则，该工具会使用 Cloudflare 的 DNS-over-HTTPS 服务将测试域名解析为 IP 地址。
4.  **规则匹配**：然后，它按照规则定义的顺序进行迭代，根据每个规则检查测试域名（及其解析的 IP），模拟 Clash 客户端的行为。
5.  **结果显示**：第一个匹配的规则决定了结果，然后该结果会显示在结果面板中。

## 如何使用

1.  在您的网络浏览器中打开此应用程序。
2.  将您的 Clash `rules` 和 `rule-providers` 配置粘贴到左侧的 YAML 编辑器中。
3.  在“要测试的域名”输入框中输入一个域名（例如 `www.google.com`）。
4.  点击 **Test** (测试) 按钮。
5.  在“Result”(结果)框中分析输出，查看匹配的规则和最终策略。

## 开发

该项目使用 React、TypeScript 和 Vite 构建。

### 安装依赖

```bash
npm install
```

### 可用脚本

- **运行开发服务器**：
  ```bash
  npm run dev
  ```
- **构建生产版本**：
  ```bash
  npm run build
  ```
- **代码风格检查**：
  ```bash
  npm run lint
  ```
- **预览生产版本**：
  ```bash
  npm run preview
  ```
